// quite untested, adapted from BigstickCarpet's gist, attempt to make it simpler to usefunction openIndexedDB (fileindex) {  // This works on all devices/browsers, and uses IndexedDBShim as a final fallback   var indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB || window.shimIndexedDB;  var openDB = indexedDB.open("MyDatabase6", 2);  openDB.onupgradeneeded = function() {    var db = {}    db.result = openDB.result;    db.store = db.result.createObjectStore("MyObjectStore", {keyPath: "id"});    if (fileindex) db.index = db.store.createIndex("question", fileindex, {unique: true});  };  return openDB;}function getStoreIndexedDB (openDB) {  var db = {};  db.result = openDB.result;  db.tx = db.result.transaction("MyObjectStore", "readwrite");  db.store = db.tx.objectStore("MyObjectStore");  db.index = db.store.index("question");  return db;}function saveIndexedDB (file, fileindex) {  var openDB = openIndexedDB(fileindex);  openDB.onsuccess = function() {    var db = getStoreIndexedDB(openDB);    db.store.put(file);  }  return true;}function deleteIndexedDB (id, fileindex) {  var openDB = openIndexedDB(fileindex);  openDB.onsuccess = function() {    var db = getStoreIndexedDB(openDB);    db.store.delete(id);  }  alert("HEJ")  return true;}function findIndexedDB (filesearch, callback) {  return loadIndexedDB(null, callback, filesearch);}function loadIndexedDB (filename, callback, filesearch) {  var openDB = openIndexedDB();  openDB.onsuccess = function() {    var db = getStoreIndexedDB(openDB);    if (filename) {      getData = db.store.get(filename);    } else {      getData = (db.index).get(filesearch);    }    getData.onsuccess = function() {      callback(getData.result);    };    db.tx.oncomplete = function() {      db.result.close();    };  }  return true;}// function getAll(filesearch) {// //   	var openDB = openIndexedDB(filesearch);// //   	openDB.onsuccess = function() {//     	var db = getStoreIndexedDB(openDB);//     	//       	let request = db.store.openCursor(null, IDBCursor.NEXT);//       	let results = [];//       	request.onsuccess = function(e) {//         	let cursor = e.target.result;//         	if (cursor) {//           		console.log("Key:" + cursor.key + " Value:" + cursor.value);//           		results.push({ [cursor.key]: cursor.value });//           		cursor.continue();//         	} else {//         		let str="";//         		for(i = 0; i < results.length; i++) {// //         			str = str + "\n"//         			        	//	alert(results);// //          				let id =Object.getOwnPropertyNames(results[i]);// //         				for(var key in (results[i])[id]) {//         //     						var value = ((results[i])[id])[key];//     						str = str+value+" ";// 						}//         				str += "\n"// //   					//         		}//           		alert(str);//         	}//       	};//       	request.onerror = function(e) {//       		alert("ERROR "+e.target.error);//       	}//   	}//   // // }function callbackGetName (filedata) {	if(filedata == undefined) {		document.getElementById("p").textContent = "Can't find the person";		return;	}	let str = filedata.name;		document.getElementById("p").textContent = str}$(document).ready(function() {// 	getAll("question");// 	example();	$("#add").click(function() {  		var fileindex = "question";  		var id = $('#id').val();  		var name = $('#name').val();    	saveIndexedDB({id:id, name: name}, fileindex);	})		$("#delete").click(function() {  		var fileindex = "question";  		var id = $('#delete-id').val();    	deleteIndexedDB(id, fileindex);	})		$("#find").click(function() {  		var id = $('#find-id').val(); 	  	loadIndexedDB(id, callbackGetName);	})	});